# 本人確認AI
- 作成者：Funamoto
- リリース日：2018.9.19
- 更新日：2018.9.19

# 概要
1. 帳票分類
2. 諸々の前処理
3. SSDで文字の座標を予測。その座標で文字画像を切り取る
4. CNNで文字認識
5. LSTMでその文字が氏名なのか住所なのかなどを特定する


# 動作環境
- Python 3.6.5
- OpenCV 3.4.0
- numpy 1.14.2
- Pillow 2.0.0
- Scikit learn 0.19.1
- Keras  2.2.2


# ディレクトリ構成内容の説明
- `card_CNN`：概要１を実行
- `load_cnn_parameter`：概要２
- `corner`：概要２
- `restoration`：概要２
- `integration`：概要２
- `new_ssd_trim_cnn`：概要３
- `cnn_moji_new2`：概要４
- `lstm_fts`：概要５





# 概要２の前処理系の説明
```
load_cnn_parameter：入力した画像の回転角度、拡大縮小、平行移動距離を学習。斜めになったりした画像を入力してそのパラメーターを予測。


restoration：load_cnn_parameterで予測したパラメーターをもとに、画像を水平に戻す。


corner：画像の頂点の座標を学習して、座標を予測


integration：デカイ住民票は４分割、５分割にして部分ごとにSSDへかけるための画像分割作業。SSDで出てくる座標は、部分的な座標。その部分的な座標は元の大きさの画像に繋ぎ合わせたときに元の画像の中でどこに位置するのか全体の中での座標を求める作業も行う。

```


# 概要３のSSD関連の説明
```
new_ssd_trim_cnn：
SSDでの学習。ウェイトをロードしてSSDで画像の座標予測。抜き出した座標に従って、画像を切り抜き、npyファイルで画像を保存。
そのあとに、CNNで画像にどんな文字が書かれているか文字認識しようとしているが、このCNNの部分は精度が悪いので無視。この後のcnn_moji_new2で本格的な文字認識を行う。
```


# 概要４の文字認識の説明
```
cnn_moji_new2：
ひらがな、カタカナ、漢字、数字、アルファベットの学習用画像を生成して、それぞれの文字５種類ごとの識別CNNを学習させる。
jpg画像が格納されたフォルダから画像を取り出して、ウェイトをロードし、なんの文字が書かれているか予測する。
```


# 概要５の文字分類の説明
```
lstm_fts：
概要４の文字が氏名か住所か番号かなど、どの情報に該当するのかを判別する。
CNNから文字を出力した文字列とラベル名（氏名、住所など）が格納されているcsvファイルとSSDで認識した文字の座標が格納されたnpyファイルの二つを入力して、ラベルを予測する。

```


